<script>

const API_URL = "https://script.google.com/macros/s/AKfycbz-5sJLcRzLDI2SSOYr4fSI8R756ps0sjMBwQQjQ6Vd4kZJeGay4eaGRE0KvUM4mA337Q/exec";

fetch(API_URL)
.then(res => res.json())
.then(data => {

  const thead = document.querySelector("#table thead");
  const tbody = document.querySelector("#table tbody");

  // HEADER
  let headerRow = "<tr>";
  Object.keys(data[0]).forEach(key => {
    headerRow += `<th>${key}</th>`;
  });
  headerRow += "</tr>";
  thead.innerHTML = headerRow;

  // DATA
  data.forEach(row => {
    let tr = "<tr>";

    Object.values(row).forEach(val => {

      // AUTO tampil gambar jika link image
      if(typeof val === "string" && val.startsWith("http")){
        tr += `<td><img src="${val}" style="width:70px;border-radius:8px"></td>`;
      } else {
        tr += `<td>${val}</td>`;
      }

    });

    tr += "</tr>";
    tbody.innerHTML += tr;
  });

});

function filterData(){
  let input = document.getElementById("search").value.toLowerCase();
  let rows = document.querySelectorAll("#table tbody tr");

  rows.forEach(row => {
    row.style.display = row.innerText.toLowerCase().includes(input)
      ? ""
      : "none";
  });
}

</script>
